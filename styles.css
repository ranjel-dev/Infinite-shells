:root{
  --shellSize: clamp(78px, 11vw, 120px);
  --pearlSize: clamp(44px, 6vw, 64px);

  --lifelineSize: clamp(64px, 8vw, 88px);
  --lifelineGap: 14px;

  /* Pearl should sit UNDER the shell but still be fully covered while shell is down.
     The pearl is revealed by lifting the shell, not by moving pearl down. */
  --pearlYOffset: 10px; /* tweakable if needed */
}

body{
  margin:0;
  padding:14px;
  background:#0b0b10;
  color:#e8e8ef;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

#hud{
  max-width:920px;
  margin:0 auto 12px;
  display:grid;
  gap:8px;
}

#scoreLine{ font-size:18px; }
#msg{ min-height:1.2em; opacity:.92; }

#btnReset{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid #2c2c3a;
  background:#151522;
  color:#e8e8ef;
  cursor:pointer;
}

/* =========================
   GAME BOARD
========================= */
#board{
  width:min(920px, calc(100vw - 28px));
  aspect-ratio:16/9;
  margin:0 auto;
  border-radius:22px;
  border:1px solid #2c2c3a;
  position:relative;
  overflow:hidden;

  /* ðŸ”’ LOCKED BACKGROUND */
  background:#0F2F1F;

  user-select:none;
  cursor:pointer;
}

/* Rotate warning */
#rotateOverlay{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:#0b0b10;
  color:#e8e8ef;
  letter-spacing:.08em;
  z-index:2000;
}
@media (orientation:portrait){
  #rotateOverlay{ display:flex; }
}

/* =========================
   SCREENS (OPAQUE)
========================= */
.screen{
  position:absolute;
  inset:0;
  display:none;
  z-index:1000;
}

.screenBg{
  position:absolute;
  inset:0;
}

.screenContent{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  transition:opacity 550ms ease;
}

.screen.show{ display:block; }
.screen.show .screenContent{ opacity:1; }
.screen.fadeOut .screenContent{ opacity:0; }

/* ---------- LOADING ---------- */
#loadingScreen{ z-index:1100; }
#loadingScreen .screenBg{ background:#ffffff; }

#loadingLogo{
  max-width:82%;
  max-height:64%;
  object-fit:contain;
  pointer-events:none;
  user-select:none;
}

/* ---------- TITLE ---------- */
#titleScreen{ z-index:1050; }
#titleScreen .screenBg{ background:#0b0b10; }

#titleImage{
  width:100%;
  height:100%;
  object-fit:cover;
  pointer-events:none;
  user-select:none;
}

.pressStart{
  position:absolute;
  bottom:18%;
  left:50%;
  transform:translateX(-50%);
  font-size:clamp(14px, 3vw, 22px);
  letter-spacing:0.22em;
  text-transform:uppercase;
  color:#e8e8ef;
  opacity:.5;
  animation:ctaFade 2s ease-in-out infinite;
  pointer-events:none;
}

@keyframes ctaFade{
  0%{opacity:.35}
  50%{opacity:.85}
  100%{opacity:.35}
}

/* ---------- MENU ---------- */
#menuScreen{ z-index:1040; }
#menuScreen .screenBg{ background:#0b0b10; }

.menuContent{
  padding:28px;
}

.menuPanel{
  width:min(520px, 88%);
  display:grid;
  gap:14px;
}

.menuBtn{
  padding:16px 18px;
  border-radius:14px;
  border:1px solid #2c2c3a;
  background:#151522;
  color:#e8e8ef;
  font-size:18px;
  letter-spacing:.02em;
  cursor:pointer;
}

.menuBtn:active{
  transform:translateY(1px);
}

.menuBtn.disabled{
  opacity:.45;
  cursor:not-allowed;
}

/* =========================
   GAME ELEMENTS
========================= */
#shellLayer{
  position:absolute;
  inset:0;
  z-index:20; /* shells ABOVE pearl */
}

/* Shell visual (art) */
.shell{
  position:absolute;
  width:var(--shellSize);
  height:var(--shellSize);

  /* move shells up a bit vs earlier: */
  bottom:34%;

  transform:translateX(-50%);
  border-radius:18px;
  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;

  transition:left 260ms ease, transform 260ms ease;
  filter: drop-shadow(0 10px 12px rgba(0,0,0,.35));
}

/* Lift used for reveals */
.shell.lift{
  transform:translateX(-50%) translateY(-22px) scale(1.03);
}

/* HITBOX: larger invisible tap target */
.shellHit{
  position:absolute;
  width:var(--shellSize);
  height:var(--shellSize);

  /* Match the shell vertical position */
  bottom:34%;

  transform:translateX(-50%);
  border-radius:18px;
  background:transparent;
  z-index:25; /* above shell art so it always catches */
}

/* =========================
   PEARL (always behind shells)
========================= */
#pearl{
  position:absolute;
  width:var(--pearlSize);
  height:var(--pearlSize);

  /* Align with shells; pearl should be covered while shell is down */
  bottom:calc(34% + var(--pearlYOffset));

  transform:translateX(-50%);
  opacity:0;
  transition:opacity 140ms ease;

  z-index:10; /* BELOW shells so it never looks "on top" */

  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;

  filter:
    drop-shadow(0 0 10px rgba(180,255,220,0.22))
    drop-shadow(0 0 22px rgba( 90,255,190,0.14))
    drop-shadow(0 10px 14px rgba(0,0,0,0.35));
}

/* Optional pulse (not active unless JS adds class) */
#pearl.revealPulse{
  animation: pearlPulse 260ms ease-out 1;
}

@keyframes pearlPulse{
  0%{
    transform:translateX(-50%) scale(0.98);
    filter:
      drop-shadow(0 0 6px rgba(180,255,220,0.18))
      drop-shadow(0 0 16px rgba(90,255,190,0.10))
      drop-shadow(0 10px 14px rgba(0,0,0,0.35));
  }
  60%{
    transform:translateX(-50%) scale(1.06);
    filter:
      drop-shadow(0 0 14px rgba(180,255,220,0.28))
      drop-shadow(0 0 30px rgba(90,255,190,0.18))
      drop-shadow(0 10px 14px rgba(0,0,0,0.35));
  }
  100%{
    transform:translateX(-50%) scale(1);
    filter:
      drop-shadow(0 0 10px rgba(180,255,220,0.22))
      drop-shadow(0 0 22px rgba(90,255,190,0.14))
      drop-shadow(0 10px 14px rgba(0,0,0,0.35));
  }
}

/* =========================
   OVERLAY / RECORD
========================= */
#overlay{
  position:absolute;
  inset:0;
  background:rgba(255,40,60,.22);
  opacity:0;
  transition:opacity 160ms ease;

  pointer-events:none;
  z-index:50;
}
#overlay.flash{ opacity:1; }

#recordText{
  position:absolute;
  top:18px;
  left:50%;
  transform:translateX(-50%);
  font-weight:800;
  letter-spacing:1px;
  color:#ffd54a;
  opacity:0;
  transition:opacity 250ms ease;
  z-index:60;
}
#recordText.show{ opacity:1; }